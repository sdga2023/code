"use strict";var polygonArea=function(t){for(var e,n=-1,r=t.length,i=t[r-1],a=0;++n<r;)e=i,i=t[n],a+=e[1]*i[0]-e[0]*i[1];return a/2},d3Centroid=function(t){for(var e,n,r=-1,i=t.length,a=0,o=0,s=t[i-1],h=0;++r<i;)e=s,s=t[r],h+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a/(h*=3),o/h]},cross=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])};function lexicographicOrder(t,e){return t[0]-e[0]||t[1]-e[1]}function computeUpperHullIndexes(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;++i){for(;1<r&&cross(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}var polygonLength=function(t){for(var e,n,r=-1,i=t.length,a=t[i-1],o=a[0],s=a[1],h=0;++r<i;)e=o,n=s,e-=o=(a=t[r])[0],n-=s=a[1],h+=Math.sqrt(e*e+n*n);return h},paramCounts={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},SPECIAL_SPACES=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function isSpace(t){return 10===t||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||5760<=t&&0<=SPECIAL_SPACES.indexOf(t)}function isCommand(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function isArc(t){return 97==(32|t)}function isDigit(t){return 48<=t&&t<=57}function isDigitStart(t){return 48<=t&&t<=57||43===t||45===t||46===t}function State(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function skipSpaces(t){for(;t.index<t.max&&isSpace(t.path.charCodeAt(t.index));)t.index++}function scanFlag(t){var e=t.path.charCodeAt(t.index);return 48===e?(t.param=0,void t.index++):49===e?(t.param=1,void t.index++):void(t.err="SvgPath: arc flag can be 0 or 1 only (at pos "+t.index+")")}function scanParam(t){var e,n,r=t.index,i=r,a=t.max,o=!1,s=!1,h=!1;if(a<=i)t.err="SvgPath: missed param (at pos "+i+")";else if(isDigit(n=43!==(n=t.path.charCodeAt(i))&&45!==n?n:++i<a?t.path.charCodeAt(i):0)||46===n){if(46!==n){if(e=48===n,n=++i<a?t.path.charCodeAt(i):0,e&&i<a&&n&&isDigit(n))return void(t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+r+")");for(;i<a&&isDigit(t.path.charCodeAt(i));)i++,o=!0;n=i<a?t.path.charCodeAt(i):0}if(46===n){for(h=!0,i++;isDigit(t.path.charCodeAt(i));)i++,s=!0;n=i<a?t.path.charCodeAt(i):0}if(101===n||69===n){if(h&&!o&&!s)return void(t.err="SvgPath: invalid float exponent (at pos "+i+")");if(43!==(n=++i<a?t.path.charCodeAt(i):0)&&45!==n||i++,!(i<a&&isDigit(t.path.charCodeAt(i))))return void(t.err="SvgPath: invalid float exponent (at pos "+i+")");for(;i<a&&isDigit(t.path.charCodeAt(i));)i++}t.index=i,t.param=parseFloat(t.path.slice(r,i))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+i+")"}function finalizeSegment(t){var e=t.path[t.segmentStart],n=e.toLowerCase(),r=t.data;if("m"===n&&2<r.length&&(t.result.push([e,r[0],r[1]]),r=r.slice(2),n="l",e="m"===e?"l":"L"),"r"===n)t.result.push([e].concat(r));else for(;r.length>=paramCounts[n]&&(t.result.push([e].concat(r.splice(0,paramCounts[n]))),paramCounts[n]););}function scanSegment(t){var e,n,r,i,a,o=t.max;if(t.segmentStart=t.index,n=isArc(e=t.path.charCodeAt(t.index)),isCommand(e))if(i=paramCounts[t.path[t.index].toLowerCase()],t.index++,skipSpaces(t),t.data=[],i){for(r=!1;;){for(a=i;0<a;a--){if((!n||3!==a&&4!==a?scanParam:scanFlag)(t),t.err.length)return;t.data.push(t.param),skipSpaces(t),r=!1,t.index<o&&44===t.path.charCodeAt(t.index)&&(t.index++,skipSpaces(t),r=!0)}if(!r){if(t.index>=t.max)break;if(!isDigitStart(t.path.charCodeAt(t.index)))break}}finalizeSegment(t)}else finalizeSegment(t);else t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")"}var path_parse=function(t){var e=new State(t),n=e.max;for(skipSpaces(e);e.index<n&&!e.err.length;)scanSegment(e);return e.err.length?e.result=[]:e.result.length&&("mM".indexOf(e.result[0][0])<0?(e.err="SvgPath: string should start with `M` or `m`",e.result=[]):e.result[0][0]="M"),{err:e.err,segments:e.result}};function combine(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}function Matrix(){if(!(this instanceof Matrix))return new Matrix;this.queue=[],this.cache=null}Matrix.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]||(this.cache=null,this.queue.push(t)),this},Matrix.prototype.translate=function(t,e){return 0===t&&0===e||(this.cache=null,this.queue.push([1,0,0,1,t,e])),this},Matrix.prototype.scale=function(t,e){return 1===t&&1===e||(this.cache=null,this.queue.push([t,0,0,e,0,0])),this},Matrix.prototype.rotate=function(t,e,n){var r;return 0!==t&&(this.translate(e,n),t=t*Math.PI/180,r=Math.cos(t),t=Math.sin(t),this.queue.push([r,t,-t,r,0,0]),this.cache=null,this.translate(-e,-n)),this},Matrix.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},Matrix.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},Matrix.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=combine(this.cache,this.queue[t]);return this.cache},Matrix.prototype.calc=function(t,e,n){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),[t*(r=this.cache)[0]+e*r[2]+(n?0:r[4]),t*r[1]+e*r[3]+(n?0:r[5])]):[t,e]};var matrix=Matrix,operations={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},CMD_SPLIT_RE=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,PARAMS_SPLIT_RE=/[\s,]+/,transform_parse=function(t){var e,n,r=new matrix;return t.split(CMD_SPLIT_RE).forEach(function(t){if(t.length)if(void 0!==operations[t])e=t;else switch(n=t.split(PARAMS_SPLIT_RE).map(function(t){return+t||0}),e){case"matrix":return void(6===n.length&&r.matrix(n));case"scale":return void(1===n.length?r.scale(n[0],n[0]):2===n.length&&r.scale(n[0],n[1]));case"rotate":return void(1===n.length?r.rotate(n[0],0,0):3===n.length&&r.rotate(n[0],n[1],n[2]));case"translate":return void(1===n.length?r.translate(n[0],0):2===n.length&&r.translate(n[0],n[1]));case"skewX":return void(1===n.length&&r.skewX(n[0]));case"skewY":return void(1===n.length&&r.skewY(n[0]))}}),r},TAU=2*Math.PI;function unit_vector_angle(t,e,n,r){var i=t*n+e*r;return(i=1<i?1:i)<-1&&(i=-1),(t*r-e*n<0?-1:1)*Math.acos(i)}function get_arc_center(t,e,n,r,i,a,o,s,h,u){var c=u*(t-n)/2+h*(e-r)/2,l=-h*(t-n)/2+u*(e-r)/2,f=o*o,g=s*s,p=c*c,v=l*l,x=f*g-f*v-g*p,f=(x<0&&(x=0),x/=f*v+g*p,(x=Math.sqrt(x)*(i===a?-1:1))*o/s*l),v=x*-s/o*c,g=u*f-h*v+(t+n)/2,p=h*f+u*v+(e+r)/2,i=(c-f)/o,x=(l-v)/s,t=(-c-f)/o,n=(-l-v)/s,h=unit_vector_angle(1,0,i,x),u=unit_vector_angle(i,x,t,n);return 0===a&&0<u&&(u-=TAU),1===a&&u<0&&(u+=TAU),[g,p,h,u]}function approximate_unit_arc(t,e){var n=4/3*Math.tan(e/4),r=Math.cos(t),i=Math.sin(t),a=Math.cos(t+e),t=Math.sin(t+e);return[r,i,r-i*n,i+r*n,a+t*n,t-a*n,a,t]}var a2c=function(t,e,n,r,i,a,o,s,h){var u=Math.sin(h*TAU/360),c=Math.cos(h*TAU/360),h=c*(t-n)/2+u*(e-r)/2,l=-u*(t-n)/2+c*(e-r)/2;if(0==h&&0==l)return[];if(0===o||0===s)return[];o=Math.abs(o),s=Math.abs(s);var h=h*h/(o*o)+l*l/(s*s),f=(1<h&&(o*=Math.sqrt(h),s*=Math.sqrt(h)),get_arc_center(t,e,n,r,i,a,o,s,u,c)),g=[],p=f[2],v=f[3],x=Math.max(Math.ceil(Math.abs(v)/(TAU/4)),1);v/=x;for(var d=0;d<x;d++)g.push(approximate_unit_arc(p,v)),p+=v;return g.map(function(t){for(var e=0;e<t.length;e+=2){var n=t[e+0],r=t[e+1],i=c*(n*=o)-u*(r*=s),n=u*n+c*r;t[e+0]=i+f[0],t[e+1]=n+f[1]}return t})},epsilon=1e-10,torad=Math.PI/180;function Ellipse(t,e,n){if(!(this instanceof Ellipse))return new Ellipse(t,e,n);this.rx=t,this.ry=e,this.ax=n}Ellipse.prototype.transform=function(t){var e=Math.cos(this.ax*torad),n=Math.sin(this.ax*torad),n=[this.rx*(t[0]*e+t[2]*n),this.rx*(t[1]*e+t[3]*n),this.ry*(-t[0]*n+t[2]*e),this.ry*(-t[1]*n+t[3]*e)],t=n[0]*n[0]+n[2]*n[2],e=n[1]*n[1]+n[3]*n[3],r=((n[0]-n[3])*(n[0]-n[3])+(n[2]+n[1])*(n[2]+n[1]))*((n[0]+n[3])*(n[0]+n[3])+(n[2]-n[1])*(n[2]-n[1])),i=(t+e)/2;if(r<epsilon*i)return this.rx=this.ry=Math.sqrt(i),this.ax=0,this;var n=n[0]*n[1]+n[2]*n[3],a=i+(r=Math.sqrt(r))/2,i=i-r/2;return this.ax=Math.abs(n)<epsilon&&Math.abs(a-e)<epsilon?90:180*Math.atan(Math.abs(n)>Math.abs(a-e)?(a-t)/n:n/(a-e))/Math.PI,0<=this.ax?(this.rx=Math.sqrt(a),this.ry=Math.sqrt(i)):(this.ax+=90,this.rx=Math.sqrt(i),this.ry=Math.sqrt(a)),this},Ellipse.prototype.isDegenerate=function(){return this.rx<epsilon*this.ry||this.ry<epsilon*this.rx};var ellipse=Ellipse;function SvgPath(t){if(!(this instanceof SvgPath))return new SvgPath(t);t=path_parse(t);this.segments=t.segments,this.err=t.err,this.__stack=[]}SvgPath.from=function(t){if("string"==typeof t)return new SvgPath(t);var e;if(t instanceof SvgPath)return(e=new SvgPath("")).err=t.err,e.segments=t.segments.map(function(t){return t.slice()}),e.__stack=t.__stack.map(function(t){return matrix().matrix(t.toArray())}),e;throw new Error("SvgPath.from: invalid param type "+t)},SvgPath.prototype.__matrix=function(u){var c,l=this;u.queue.length&&this.iterate(function(t,e,n,r){var i,a,o;switch(t[0]){case"v":a=0===(i=u.calc(0,t[1],!0))[0]?["v",i[1]]:["l",i[0],i[1]];break;case"V":a=(i=u.calc(n,t[1],!1))[0]===u.calc(n,r,!1)[0]?["V",i[1]]:["L",i[0],i[1]];break;case"h":a=0===(i=u.calc(t[1],0,!0))[1]?["h",i[0]]:["l",i[0],i[1]];break;case"H":a=(i=u.calc(t[1],r,!1))[1]===u.calc(n,r,!1)[1]?["H",i[0]]:["L",i[0],i[1]];break;case"a":case"A":var s=u.toArray(),h=ellipse(t[1],t[2],t[3]).transform(s);if(s[0]*s[3]-s[1]*s[2]<0&&(t[5]=t[5]?"0":"1"),i=u.calc(t[6],t[7],"a"===t[0]),"A"===t[0]&&t[6]===n&&t[7]===r||"a"===t[0]&&0===t[6]&&0===t[7]){a=["a"===t[0]?"l":"L",i[0],i[1]];break}a=h.isDegenerate()?["a"===t[0]?"l":"L",i[0],i[1]]:[t[0],h.rx,h.ry,h.ax,t[4],t[5],i[0],i[1]];break;case"m":a=["m",(i=u.calc(t[1],t[2],o=0<e))[0],i[1]];break;default:for(a=[s=t[0]],o=s.toLowerCase()===s,c=1;c<t.length;c+=2)i=u.calc(t[c],t[c+1],o),a.push(i[0],i[1])}l.segments[e]=a},!0)},SvgPath.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=matrix(),e=this.__stack.length;0<=--e;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}},SvgPath.prototype.toString=function(){var t="",e="",n=!1;this.__evaluateStack();for(var r=0,i=this.segments.length;r<i;r++){for(var a=this.segments[r],o=a[0],n=o===e&&"m"!==o&&"M"!==o||("m"===o&&"z"===e&&(t+=" "),t+=o,!1),s=1;s<a.length;s++){var h=a[s];1===s?n&&0<=h&&(t+=" "):0<=h&&(t+=" "),t+=h}e=o}return t},SvgPath.prototype.translate=function(t,e){return this.__stack.push(matrix().translate(t,e||0)),this},SvgPath.prototype.scale=function(t,e){return this.__stack.push(matrix().scale(t,e||0===e?e:t)),this},SvgPath.prototype.rotate=function(t,e,n){return this.__stack.push(matrix().rotate(t,e||0,n||0)),this},SvgPath.prototype.skewX=function(t){return this.__stack.push(matrix().skewX(t)),this},SvgPath.prototype.skewY=function(t){return this.__stack.push(matrix().skewY(t)),this},SvgPath.prototype.matrix=function(t){return this.__stack.push(matrix().matrix(t)),this},SvgPath.prototype.transform=function(t){return t.trim()&&this.__stack.push(transform_parse(t)),this},SvgPath.prototype.round=function(r){var e,i=0,a=0,o=0,s=0;return r=r||0,this.__evaluateStack(),this.segments.forEach(function(n){var t=n[0].toLowerCase()===n[0];switch(n[0]){case"H":case"h":return t&&(n[1]+=o),o=n[1]-n[1].toFixed(r),void(n[1]=+n[1].toFixed(r));case"V":case"v":return t&&(n[1]+=s),s=n[1]-n[1].toFixed(r),void(n[1]=+n[1].toFixed(r));case"Z":case"z":return o=i,void(s=a);case"M":case"m":return t&&(n[1]+=o,n[2]+=s),o=n[1]-n[1].toFixed(r),s=n[2]-n[2].toFixed(r),i=o,a=s,n[1]=+n[1].toFixed(r),void(n[2]=+n[2].toFixed(r));case"A":case"a":return t&&(n[6]+=o,n[7]+=s),o=n[6]-n[6].toFixed(r),s=n[7]-n[7].toFixed(r),n[1]=+n[1].toFixed(r),n[2]=+n[2].toFixed(r),n[3]=+n[3].toFixed(r+2),n[6]=+n[6].toFixed(r),void(n[7]=+n[7].toFixed(r));default:return e=n.length,t&&(n[e-2]+=o,n[e-1]+=s),o=n[e-2]-n[e-2].toFixed(r),s=n[e-1]-n[e-1].toFixed(r),void n.forEach(function(t,e){e&&(n[e]=+n[e].toFixed(r))})}}),this},SvgPath.prototype.iterate=function(i,t){var e,n,r,a=this.segments,o={},s=!1,h=0,u=0,c=0,l=0;if(t||this.__evaluateStack(),a.forEach(function(t,e){var n=i(t,e,h,u),r=(Array.isArray(n)&&(o[e]=n,s=!0),t[0]===t[0].toLowerCase());switch(t[0]){case"m":case"M":return h=t[1]+(r?h:0),u=t[2]+(r?u:0),c=h,void(l=u);case"h":case"H":return void(h=t[1]+(r?h:0));case"v":case"V":return void(u=t[1]+(r?u:0));case"z":case"Z":return h=c,void(u=l);default:h=t[t.length-2]+(r?h:0),u=t[t.length-1]+(r?u:0)}}),!s)return this;for(r=[],e=0;e<a.length;e++)if(void 0!==o[e])for(n=0;n<o[e].length;n++)r.push(o[e][n]);else r.push(a[e]);return this.segments=r,this},SvgPath.prototype.abs=function(){return this.iterate(function(t,e,n,r){var i,a=t[0],o=a.toUpperCase();if(a!==o)switch(t[0]=o,a){case"v":return void(t[1]+=r);case"a":return t[6]+=n,void(t[7]+=r);default:for(i=1;i<t.length;i++)t[i]+=i%2?n:r}},!0),this},SvgPath.prototype.rel=function(){return this.iterate(function(t,e,n,r){var i,a=t[0],o=a.toLowerCase();if(a!==o&&(0!==e||"M"!==a))switch(t[0]=o,a){case"V":return void(t[1]-=r);case"A":return t[6]-=n,void(t[7]-=r);default:for(i=1;i<t.length;i++)t[i]-=i%2?n:r}},!0),this},SvgPath.prototype.unarc=function(){return this.iterate(function(t,e,n,r){var i,a=[],o=t[0];return"A"!==o&&"a"!==o?null:(o="a"===o?(i=n+t[6],r+t[7]):(i=t[6],t[7]),0===(n=a2c(n,r,i,o,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(n.forEach(function(t){a.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])}),a))}),this},SvgPath.prototype.unshort=function(){var s,h,u,c,l,f=this.segments;return this.iterate(function(t,e,n,r){var i,a=t[0],o=a.toUpperCase();e&&("T"===o?(u=f[e-1],h="Q"===u[0]?(s=u[1]-n,u[2]-r):"q"===u[0]?(s=u[1]-u[3],u[2]-u[4]):s=0,c=-s,l=-h,(i="t"===a)||(c+=n,l+=r),f[e]=[i?"q":"Q",c,l,t[1],t[2]]):"S"===o&&(u=f[e-1],h="C"===u[0]?(s=u[3]-n,u[4]-r):"c"===u[0]?(s=u[3]-u[5],u[4]-u[6]):s=0,c=-s,l=-h,(i="s"===a)||(c+=n,l+=r),f[e]=[i?"c":"C",c,l,t[1],t[2],t[3],t[4]]))}),this};var svgpath$1=SvgPath,svgpath=SvgPath,length={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},segment=/([astvzqmhlc])([^astvzqmhlc]*)/gi,parse$1=function(t){var i=[];return t.replace(segment,function(t,e,n){var r=e.toLowerCase();for(n=parseValues(n),"m"===r&&2<n.length&&(i.push([e].concat(n.splice(0,2))),r="l",e="m"===e?"l":"L");0<=n.length;){if(n.length===length[r])return n.unshift(e),i.push(n);if(n.length<length[r])throw new Error("malformed path data");i.push([e].concat(n.splice(0,length[r])))}}),i},number=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function parseValues(t){t=t.match(number);return t?t.map(Number):[]}var Bezier=function(t,e,n,r,i,a,o,s){return new Bezier$1(t,e,n,r,i,a,o,s)};function Bezier$1(t,e,n,r,i,a,o,s){this.a={x:t,y:e},this.b={x:n,y:r},this.c={x:i,y:a},this.d={x:o,y:s},null!=o&&null!=s?(this.getArcLength=getCubicArcLength,this.getPoint=cubicPoint,this.getDerivative=cubicDerivative):(this.getArcLength=getQuadraticArcLength,this.getPoint=quadraticPoint,this.getDerivative=quadraticDerivative),this.init()}function quadraticDerivative(t,e,n){return{x:2*(1-n)*(t[1]-t[0])+2*n*(t[2]-t[1]),y:2*(1-n)*(e[1]-e[0])+2*n*(e[2]-e[1])}}function cubicDerivative(t,e,n){return quadraticPoint([3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],[3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],n)}function t2length(t,e,n,r,i){for(var a=1,o=t/e,s=(t-n(r,i,o))/e;.001<a;){var h=n(r,i,o+s),u=n(r,i,o-s),h=Math.abs(t-h)/e,u=Math.abs(t-u)/e;h<a?(a=h,o+=s):u<a?(a=u,o-=s):s/=2}return o}function quadraticPoint(t,e,n){return{x:(1-n)*(1-n)*t[0]+2*(1-n)*n*t[1]+n*n*t[2],y:(1-n)*(1-n)*e[0]+2*(1-n)*n*e[1]+n*n*e[2]}}function cubicPoint(t,e,n){return{x:(1-n)*(1-n)*(1-n)*t[0]+3*(1-n)*(1-n)*n*t[1]+3*(1-n)*n*n*t[2]+n*n*n*t[3],y:(1-n)*(1-n)*(1-n)*e[0]+3*(1-n)*(1-n)*n*e[1]+3*(1-n)*n*n*e[2]+n*n*n*e[3]}}function getQuadraticArcLength(t,e,n){void 0===n&&(n=1);var r=t[0]-2*t[1]+t[2],i=e[0]-2*e[1]+e[2],a=2*t[1]-2*t[0],o=2*e[1]-2*e[0],s=4*(r*r+i*i),r=4*(r*a+i*o),i=a*a+o*o;if(0==s)return n*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));a=r/(2*s),o=n+a,t=i/s-a*a;return Math.sqrt(s)/2*(o*Math.sqrt(o*o+t)-a*Math.sqrt(a*a+t)+t*Math.log(Math.abs((o+Math.sqrt(o*o+t))/(a+Math.sqrt(a*a+t)))))}Bezier$1.prototype={constructor:Bezier$1,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(t){t=t2length(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t)},getTangentAtLength:function(t){var t=t2length(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),t=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t),e=Math.sqrt(t.x*t.x+t.y*t.y),t=0<e?{x:t.x/e,y:t.y/e}:{x:0,y:0};return t},getPropertiesAtLength:function(t){var t=t2length(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),e=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t),n=Math.sqrt(e.x*e.x+e.y*e.y),e=0<n?{x:e.x/n,y:e.y/n}:{x:0,y:0},n=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t);return{x:n.x,y:n.y,tangentX:e.x,tangentY:e.y}}};var tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];function binomials(t,e){return binomialCoefficients[t][e]}function getDerivative(t,e,n){var r,i,a,o=n.length-1;if(0==o)return 0;if(0===t){for(a=i=0;a<=o;a++)i+=binomials(o,a)*Math.pow(1-e,o-a)*Math.pow(e,a)*n[a];return i}for(r=new Array(o),a=0;a<o;a++)r[a]=o*(n[a+1]-n[a]);return getDerivative(t-1,e,r)}function B(t,e,n){t=getDerivative(1,n,t),n=getDerivative(1,n,e);return Math.sqrt(t*t+n*n)}function getCubicArcLength(t,e,n){for(var r,i=(n=void 0===n?1:n)/2,a=0,o=0;o<20;o++)r=i*tValues[20][o]+i,a+=cValues[20][o]*B(t,e,r);return i*a}var TAU$1=2*Math.PI;function unit_vector_angle$1(t,e,n,r){var i=t*n+e*r;return(i=1<i?1:i)<-1&&(i=-1),(t*r-e*n<0?-1:1)*Math.acos(i)}function get_arc_center$1(t,e,n,r,i,a,o,s,h,u){var c=u*(t-n)/2+h*(e-r)/2,l=-h*(t-n)/2+u*(e-r)/2,f=o*o,g=s*s,p=c*c,v=l*l,x=f*g-f*v-g*p,f=(x<0&&(x=0),x/=f*v+g*p,(x=Math.sqrt(x)*(i===a?-1:1))*o/s*l),v=x*-s/o*c,g=u*f-h*v+(t+n)/2,p=h*f+u*v+(e+r)/2,i=(c-f)/o,x=(l-v)/s,t=(-c-f)/o,n=(-l-v)/s,h=unit_vector_angle$1(1,0,i,x),u=unit_vector_angle$1(i,x,t,n);return 0===a&&0<u&&(u-=TAU$1),1===a&&u<0&&(u+=TAU$1),[g,p,h,u]}function approximate_unit_arc$1(t,e){var n=4/3*Math.tan(e/4),r=Math.cos(t),i=Math.sin(t),a=Math.cos(t+e),t=Math.sin(t+e);return[r,i,r-i*n,i+r*n,a+t*n,t-a*n,a,t]}var a2c$3=function(t,e,a,o,n,r,i,s,h){var u=Math.sin(n*TAU$1/360),c=Math.cos(n*TAU$1/360),n=c*(t-s)/2+u*(e-h)/2,l=-u*(t-s)/2+c*(e-h)/2;if(0==n&&0==l)return[];if(0===a||0===o)return[];a=Math.abs(a),o=Math.abs(o);var n=n*n/(a*a)+l*l/(o*o),f=(1<n&&(a*=Math.sqrt(n),o*=Math.sqrt(n)),get_arc_center$1(t,e,s,h,r,i,a,o,u,c)),g=[],p=f[2],v=f[3],x=Math.max(Math.ceil(Math.abs(v)/(TAU$1/4)),1);v/=x;for(var d=0;d<x;d++)g.push(approximate_unit_arc$1(p,v)),p+=v;return g.map(function(t){for(var e=0;e<t.length;e+=2){var n=t[e+0],r=t[e+1],i=c*(n*=a)-u*(r*=o),n=u*n+c*r;t[e+0]=i+f[0],t[e+1]=n+f[1]}return t})},Arc=function(t,e,n,r,i,a,o,s,h){return new Arc$1(t,e,n,r,i,a,o,s,h)};function Arc$1(t,e,n,r,i,a,o,s,h){var u=0,c=[],l=[];a2c$3(t,e,n,r,i,a,o,s,h).forEach(function(t){var t=new Bezier(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),e=t.getTotalLength();u+=e,c.push(e),l.push(t)}),this.length=u,this.partialLengths=c,this.curves=l}Arc$1.prototype={constructor:Arc$1,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&0<this.partialLengths[e];)e--;e<this.partialLengths.length-1&&e++;for(var n=0,r=0;r<e;r++)n+=this.partialLengths[r];return this.curves[e].getPointAtLength(t-n)},getTangentAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&0<this.partialLengths[e];)e--;e<this.partialLengths.length-1&&e++;for(var n=0,r=0;r<e;r++)n+=this.partialLengths[r];return this.curves[e].getTangentAtLength(t-n)},getPropertiesAtLength:function(t){var e=this.getTangentAtLength(t),t=this.getPointAtLength(t);return{x:t.x,y:t.y,tangentX:e.x,tangentY:e.y}}};var LinearPosition=function(t,e,n,r){return new LinearPosition$1(t,e,n,r)};function LinearPosition$1(t,e,n,r){this.x0=t,this.x1=e,this.y0=n,this.y1=r}LinearPosition$1.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))},LinearPosition$1.prototype.getPointAtLength=function(t){var t=t/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),e=(this.x1-this.x0)*t,t=(this.y1-this.y0)*t;return{x:this.x0+e,y:this.y0+t}},LinearPosition$1.prototype.getTangentAtLength=function(){var t=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/t,y:(this.y1-this.y0)/t}},LinearPosition$1.prototype.getPropertiesAtLength=function(t){var t=this.getPointAtLength(t),e=this.getTangentAtLength();return{x:t.x,y:t.y,tangentX:e.x,tangentY:e.y}};var svgPathProperties=function(t){var s=0,h=[],u=[];function c(t){if(!t)return null;for(var e,n,r=parse$1(t),i=[0,0],a=[0,0],o=0;o<r.length;o++)"M"===r[o][0]?(n=[(i=[r[o][1],r[o][2]])[0],i[1]],u.push(null)):"m"===r[o][0]?(n=[(i=[r[o][1]+i[0],r[o][2]+i[1]])[0],i[1]],u.push(null)):"L"===r[o][0]?(s+=Math.sqrt(Math.pow(i[0]-r[o][1],2)+Math.pow(i[1]-r[o][2],2)),u.push(new LinearPosition(i[0],r[o][1],i[1],r[o][2])),i=[r[o][1],r[o][2]]):"l"===r[o][0]?(s+=Math.sqrt(Math.pow(r[o][1],2)+Math.pow(r[o][2],2)),u.push(new LinearPosition(i[0],r[o][1]+i[0],i[1],r[o][2]+i[1])),i=[r[o][1]+i[0],r[o][2]+i[1]]):"H"===r[o][0]?(s+=Math.abs(i[0]-r[o][1]),u.push(new LinearPosition(i[0],r[o][1],i[1],i[1])),i[0]=r[o][1]):"h"===r[o][0]?(s+=Math.abs(r[o][1]),u.push(new LinearPosition(i[0],i[0]+r[o][1],i[1],i[1])),i[0]=r[o][1]+i[0]):"V"===r[o][0]?(s+=Math.abs(i[1]-r[o][1]),u.push(new LinearPosition(i[0],i[0],i[1],r[o][1])),i[1]=r[o][1]):"v"===r[o][0]?(s+=Math.abs(r[o][1]),u.push(new LinearPosition(i[0],i[0],i[1],i[1]+r[o][1])),i[1]=r[o][1]+i[1]):"z"===r[o][0]||"Z"===r[o][0]?(s+=Math.sqrt(Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2)),u.push(new LinearPosition(i[0],n[0],i[1],n[1])),i=[n[0],n[1]]):"C"===r[o][0]?(e=new Bezier(i[0],i[1],r[o][1],r[o][2],r[o][3],r[o][4],r[o][5],r[o][6]),s+=e.getTotalLength(),i=[r[o][5],r[o][6]],u.push(e)):"c"===r[o][0]?(e=new Bezier(i[0],i[1],i[0]+r[o][1],i[1]+r[o][2],i[0]+r[o][3],i[1]+r[o][4],i[0]+r[o][5],i[1]+r[o][6]),s+=e.getTotalLength(),i=[r[o][5]+i[0],r[o][6]+i[1]],u.push(e)):"S"===r[o][0]?(e=0<o&&-1<["C","c","S","s"].indexOf(r[o-1][0])?new Bezier(i[0],i[1],2*i[0]-r[o-1][r[o-1].length-4],2*i[1]-r[o-1][r[o-1].length-3],r[o][1],r[o][2],r[o][3],r[o][4]):new Bezier(i[0],i[1],i[0],i[1],r[o][1],r[o][2],r[o][3],r[o][4]),s+=e.getTotalLength(),i=[r[o][3],r[o][4]],u.push(e)):"s"===r[o][0]?(e=0<o&&-1<["C","c","S","s"].indexOf(r[o-1][0])?new Bezier(i[0],i[1],i[0]+e.d.x-e.c.x,i[1]+e.d.y-e.c.y,i[0]+r[o][1],i[1]+r[o][2],i[0]+r[o][3],i[1]+r[o][4]):new Bezier(i[0],i[1],i[0],i[1],i[0]+r[o][1],i[1]+r[o][2],i[0]+r[o][3],i[1]+r[o][4]),s+=e.getTotalLength(),i=[r[o][3]+i[0],r[o][4]+i[1]],u.push(e)):"Q"===r[o][0]?(e=i[0]!=r[o][1]&&i[1]!=r[o][2]?new Bezier(i[0],i[1],r[o][1],r[o][2],r[o][3],r[o][4]):new LinearPosition(r[o][1],r[o][3],r[o][2],r[o][4]),s+=e.getTotalLength(),u.push(e),i=[r[o][3],r[o][4]],a=[r[o][1],r[o][2]]):"q"===r[o][0]?(e=0!=r[o][1]||0!=r[o][2]?new Bezier(i[0],i[1],i[0]+r[o][1],i[1]+r[o][2],i[0]+r[o][3],i[1]+r[o][4]):new LinearPosition(i[0]+r[o][1],i[0]+r[o][3],i[1]+r[o][2],i[1]+r[o][4]),s+=e.getTotalLength(),a=[i[0]+r[o][1],i[1]+r[o][2]],i=[r[o][3]+i[0],r[o][4]+i[1]],u.push(e)):"T"===r[o][0]?(e=0<o&&-1<["Q","q","T","t"].indexOf(r[o-1][0])?new Bezier(i[0],i[1],2*i[0]-a[0],2*i[1]-a[1],r[o][1],r[o][2]):new LinearPosition(i[0],r[o][1],i[1],r[o][2]),u.push(e),s+=e.getTotalLength(),a=[2*i[0]-a[0],2*i[1]-a[1]],i=[r[o][1],r[o][2]]):"t"===r[o][0]?(e=0<o&&-1<["Q","q","T","t"].indexOf(r[o-1][0])?new Bezier(i[0],i[1],2*i[0]-a[0],2*i[1]-a[1],i[0]+r[o][1],i[1]+r[o][2]):new LinearPosition(i[0],i[0]+r[o][1],i[1],i[1]+r[o][2]),s+=e.getTotalLength(),a=[2*i[0]-a[0],2*i[1]-a[1]],i=[r[o][1]+i[0],r[o][2]+i[0]],u.push(e)):"A"===r[o][0]?(e=new Arc(i[0],i[1],r[o][1],r[o][2],r[o][3],r[o][4],r[o][5],r[o][6],r[o][7]),s+=e.getTotalLength(),i=[r[o][6],r[o][7]],u.push(e)):"a"===r[o][0]&&(e=new Arc(i[0],i[1],r[o][1],r[o][2],r[o][3],r[o][4],r[o][5],i[0]+r[o][6],i[1]+r[o][7]),s+=e.getTotalLength(),i=[i[0]+r[o][6],i[1]+r[o][7]],u.push(e)),h.push(s);return c}c.getTotalLength=function(){return s},c.getPointAtLength=function(t){t=e(t);return u[t.i].getPointAtLength(t.fraction)},c.getTangentAtLength=function(t){t=e(t);return u[t.i].getTangentAtLength(t.fraction)},c.getPropertiesAtLength=function(t){t=e(t);return u[t.i].getPropertiesAtLength(t.fraction)};var e=function(t){t<0?t=0:s<t&&(t=s);for(var e=h.length-1;h[e]>=t&&0<h[e];)e--;return{fraction:t-h[++e-1],i:e}};return c(t)};function distance(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function pointAlong(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function samePoint(t,e){return distance(t,e)<1e-9}function interpolatePoints(t,n,r){var i=t.map(function(t,e){return interpolatePoint(t,n[e])});return function(e){var t=i.map(function(t){return t(e)});return r?toPathString(t):t}}function interpolatePoint(t,r){return function(n){return t.map(function(t,e){return t+n*(r[e]-t)})}}function isFiniteNumber(t){return"number"==typeof t&&isFinite(t)}function polygonCentroid$$1(t){return nonZeroArea(t)?d3Centroid(t):[(t[0][0]+t[t.length-1][0])/2,(t[0][1]+t[t.length-1][1])/2]}function nonZeroArea(t){for(var e=0;e<t.length-2;e++){var n=t[e],r=t[e+1],i=t[e+2];if(n[0]*(r[1]-i[1])+r[0]*(i[1]-n[1])+i[0]*(n[1]-r[1]))return!0}return!1}var INVALID_INPUT='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',INVALID_INPUT_ALL="flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).";function parse$$1(t){return new svgpath(t).abs()}function split(t){return t.toString().split("M").map(function(t,e){return t=t.trim(),e&&t?"M"+t:t}).filter(function(t){return t})}function toPathString(t){return"M"+t.join("L")+"Z"}function splitPathString(t){return split(parse$$1(t))}function pathStringToRing(t,e){t=parse$$1(t);return exactRing(t)||approximateRing(t,e)}function exactRing(t){var e=t.segments||[],n=[];if(!e.length||"M"!==e[0][0])return!1;for(var r=0;r<e.length;r++){var i=e[r],a=i[0],o=i[1],i=i[2];if("M"===a&&r||"Z"===a)break;if("M"===a||"L"===a)n.push([o,i]);else if("H"===a)n.push([o,n[n.length-1][1]]);else{if("V"!==a)return!1;n.push([n[n.length-1][0],o])}}return!!n.length&&{ring:n}}function approximateRing(t,e){var n,r,t=split(t)[0],i=[],a=3;if(!t)throw new TypeError(INVALID_INPUT);n=(r=measure(t)).getTotalLength(),e&&isFiniteNumber(e)&&0<e&&(a=Math.max(a,Math.ceil(n/e)));for(var o=0;o<a;o++){var s=r.getPointAtLength(n*o/a);i.push([s.x,s.y])}return{ring:i,skipBisect:!0}}function measure(t){if("undefined"!=typeof window&&window&&window.document)try{var e=window.document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttributeNS(null,"d",t),e}catch(t){}return svgPathProperties(t)}function addPoints(t,e){for(var n=t.length+e,r=polygonLength(t)/e,i=0,a=0,o=r/2;t.length<n;){var s=t[i],h=t[(i+1)%t.length],u=distance(s,h);o<=a+u?(t.splice(i+1,0,u?pointAlong(s,h,(o-a)/u):s.slice(0)),o+=r):(a+=u,i++)}}function bisect(t,e){void 0===e&&(e=1/0);for(var n=0;n<t.length;n++)for(var r=t[n],i=n===t.length-1?t[0]:t[n+1];distance(r,i)>e;)i=pointAlong(r,i,.5),t.splice(n+1,0,i)}function normalizeRing(t,e){if("string"==typeof t){var n=pathStringToRing(t,e);t=n.ring,n=n.skipBisect}else if(!Array.isArray(t))throw new TypeError(INVALID_INPUT);if(validRing(t=t.slice(0)))return 1<t.length&&samePoint(t[0],t[t.length-1])&&t.pop(),0<polygonArea(t)&&t.reverse(),!n&&e&&isFiniteNumber(e)&&0<e&&bisect(t,e),t;throw new TypeError(INVALID_INPUT)}function validRing(t){return t.every(function(t){return Array.isArray(t)&&2<=t.length&&isFiniteNumber(t[0])&&isFiniteNumber(t[1])})}var rotate=function(r,t){for(var e,i,n,a=r.length,o=1/0,s=0;s<a;s++)!function(n){i=0,t.forEach(function(t,e){e=distance(r[(n+e)%a],t);i+=e*e}),i<o&&(o=i,e=n)}(s);e&&(n=r.splice(0,e),r.splice.apply(r,[r.length,0].concat(n)))},interpolate=function(e,n,t){var r=(t=void 0===t?{}:t).maxSegmentLength,t=t.string;void 0===t&&(t=!0);var i=interpolateRing(normalizeRing(e,r=void 0===r?10:r),normalizeRing(n,r),t);return!t||"string"!=typeof e&&"string"!=typeof n?i:function(t){return t<1e-4&&"string"==typeof e?e:1-t<1e-4&&"string"==typeof n?n:i(t)}};function interpolateRing(t,e,n){var r=t.length-e.length;return addPoints(t,r<0?-1*r:0),addPoints(e,0<r?r:0),rotate(t,e),interpolatePoints(t,e,n)}var earcut_1=earcut,default_1=earcut;function earcut(t,e,n){n=n||2;var r,i,a,o,s,h=e&&e.length,u=h?e[0]*n:t.length,c=linkedList(t,0,u,n,!0),l=[];if(!c||c.next===c.prev)return l;if(h&&(c=eliminateHoles(t,e,c,n)),t.length>80*n){for(var f=r=t[0],g=i=t[1],p=n;p<u;p+=n)(a=t[p])<f&&(f=a),(o=t[p+1])<g&&(g=o),r<a&&(r=a),i<o&&(i=o);s=0!==(s=Math.max(r-f,i-g))?1/s:0}return earcutLinked(c,l,n,f,g,s),l}function linkedList(t,e,n,r,i){var a,o;if(i===0<signedArea(t,e,n,r))for(a=e;a<n;a+=r)o=insertNode(a,t[a],t[a+1],o);else for(a=n-r;e<=a;a-=r)o=insertNode(a,t[a],t[a+1],o);return o&&equals(o,o.next)&&(removeNode(o),o=o.next),o}function filterPoints(t,e){if(!t)return t;e=e||t;var n,r=t;do{if(n=!1,r.steiner||!equals(r,r.next)&&0!==area(r.prev,r,r.next))r=r.next;else{if(removeNode(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function earcutLinked(t,e,n,r,i,a,o){if(t){!o&&a&&indexCurve(t,r,i,a);for(var s,h,u=t;t.prev!==t.next;)if(s=t.prev,h=t.next,a?isEarHashed(t,r,i,a):isEar(t))e.push(s.i/n),e.push(t.i/n),e.push(h.i/n),removeNode(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?earcutLinked(t=cureLocalIntersections(filterPoints(t),e,n),e,n,r,i,a,2):2===o&&splitEarcut(t,e,n,r,i,a):earcutLinked(filterPoints(t),e,n,r,i,a,1);break}}}function isEar(t){var e=t.prev,n=t,r=t.next;if(0<=area(e,n,r))return!1;for(var i=t.next.next;i!==t.prev;){if(pointInTriangle(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&0<=area(i.prev,i,i.next))return!1;i=i.next}return!0}function isEarHashed(t,e,n,r){var i=t.prev,a=t,o=t.next;if(0<=area(i,a,o))return!1;for(var s=(i.x<a.x?i.x<o.x?i:o:a.x<o.x?a:o).x,h=(i.y<a.y?i.y<o.y?i:o:a.y<o.y?a:o).y,u=(i.x>a.x?i.x>o.x?i:o:a.x>o.x?a:o).x,c=(i.y>a.y?i.y>o.y?i:o:a.y>o.y?a:o).y,l=zOrder(s,h,e,n,r),f=zOrder(u,c,e,n,r),g=t.prevZ,p=t.nextZ;g&&g.z>=l&&p&&p.z<=f;){if(g!==t.prev&&g!==t.next&&pointInTriangle(i.x,i.y,a.x,a.y,o.x,o.y,g.x,g.y)&&0<=area(g.prev,g,g.next))return!1;if(g=g.prevZ,p!==t.prev&&p!==t.next&&pointInTriangle(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&0<=area(p.prev,p,p.next))return!1;p=p.nextZ}for(;g&&g.z>=l;){if(g!==t.prev&&g!==t.next&&pointInTriangle(i.x,i.y,a.x,a.y,o.x,o.y,g.x,g.y)&&0<=area(g.prev,g,g.next))return!1;g=g.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&pointInTriangle(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&0<=area(p.prev,p,p.next))return!1;p=p.nextZ}return!0}function cureLocalIntersections(t,e,n){var r=t;do{var i=r.prev,a=r.next.next}while(!equals(i,a)&&intersects(i,r,r.next,a)&&locallyInside(i,a)&&locallyInside(a,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(a.i/n),removeNode(r),removeNode(r.next),r=t=a),(r=r.next)!==t);return filterPoints(r)}function splitEarcut(t,e,n,r,i,a){var o=t;do{for(var s,h=o.next.next;h!==o.prev;){if(o.i!==h.i&&isValidDiagonal(o,h))return s=splitPolygon(o,h),o=filterPoints(o,o.next),s=filterPoints(s,s.next),earcutLinked(o,e,n,r,i,a),void earcutLinked(s,e,n,r,i,a);h=h.next}}while((o=o.next)!==t)}function eliminateHoles(t,e,n,r){for(var i,a=[],o=0,s=e.length;o<s;o++)(i=linkedList(t,e[o]*r,o<s-1?e[o+1]*r:t.length,r,!1))===i.next&&(i.steiner=!0),a.push(getLeftmost(i));for(a.sort(compareX),o=0;o<a.length;o++)n=filterPoints(n=eliminateHole(a[o],n),n.next);return n}function compareX(t,e){return t.x-e.x}function eliminateHole(t,e){var n=findHoleBridge(t,e);if(!n)return e;var t=splitPolygon(n,t),r=filterPoints(n,n.next);return filterPoints(t,t.next),e===n?r:e}function findHoleBridge(t,e){var n,r=e,i=t.x,a=t.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&o<s){if((o=s)===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}}while((r=r.next)!==e);if(!n)return null;if(i===o)return n;for(var h,u=n,c=n.x,l=n.y,f=1/0,r=n;i>=r.x&&r.x>=c&&i!==r.x&&pointInTriangle(a<l?i:o,a,c,l,a<l?o:i,a,r.x,r.y)&&(h=Math.abs(a-r.y)/(i-r.x),locallyInside(r,t)&&(h<f||h===f&&(r.x>n.x||r.x===n.x&&sectorContainsSector(n,r)))&&(n=r,f=h)),(r=r.next)!==u;);return n}function sectorContainsSector(t,e){return area(t.prev,t,e.prev)<0&&area(e.next,t,t.next)<0}function indexCurve(t,e,n,r){for(var i=t;null===i.z&&(i.z=zOrder(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==t;);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(t){var e,n,r,i,a,o,s,h,u=1;do{for(n=t,a=t=null,o=0;n;){for(o++,r=n,e=s=0;e<u&&(s++,r=r.nextZ);e++);for(h=u;0<s||0<h&&r;)0!==s&&(0===h||!r||n.z<=r.z)?(n=(i=n).nextZ,s--):(r=(i=r).nextZ,h--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}}while(a.nextZ=null,u*=2,1<o);return t}function zOrder(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function getLeftmost(t){for(var e=t,n=t;(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),(e=e.next)!==t;);return n}function pointInTriangle(t,e,n,r,i,a,o,s){return 0<=(i-o)*(e-s)-(t-o)*(a-s)&&0<=(t-o)*(r-s)-(n-o)*(e-s)&&0<=(n-o)*(a-s)-(i-o)*(r-s)}function isValidDiagonal(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!intersectsPolygon(t,e)&&(locallyInside(t,e)&&locallyInside(e,t)&&middleInside(t,e)&&(area(t.prev,t,e.prev)||area(t,e.prev,e))||equals(t,e)&&0<area(t.prev,t,t.next)&&0<area(e.prev,e,e.next))}function area(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function equals(t,e){return t.x===e.x&&t.y===e.y}function intersects(t,e,n,r){var i=sign(area(t,e,n)),a=sign(area(t,e,r)),o=sign(area(n,r,t)),s=sign(area(n,r,e));return i!==a&&o!==s||(!(0!==i||!onSegment(t,n,e))||(!(0!==a||!onSegment(t,r,e))||(!(0!==o||!onSegment(n,t,r))||!(0!==s||!onSegment(n,e,r)))))}function onSegment(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function sign(t){return 0<t?1:t<0?-1:0}function intersectsPolygon(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&intersects(n,n.next,t,e))return!0}while((n=n.next)!==t);return!1}function locallyInside(t,e){return area(t.prev,t,t.next)<0?0<=area(t,e,t.next)&&0<=area(t,t.prev,e):area(t,e,t.prev)<0||area(t,t.next,e)<0}function middleInside(t,e){for(var n=t,r=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),(n=n.next)!==t;);return r}function splitPolygon(t,e){var n=new Node(t.i,t.x,t.y),r=new Node(e.i,e.x,e.y),i=t.next,a=e.prev;return(t.next=e).prev=t,(n.next=i).prev=n,(r.next=n).prev=r,(a.next=r).prev=a,r}function insertNode(t,e,n,r){t=new Node(t,e,n);return r?(t.next=r.next,(t.prev=r).next.prev=t,r.next=t):(t.prev=t).next=t,t}function removeNode(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Node(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(t,e,n,r){for(var i=0,a=e,o=n-r;a<n;a+=r)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}earcut.deviation=function(t,e,n,r){var i=e&&e.length,a=i?e[0]*n:t.length,o=Math.abs(signedArea(t,0,a,n));if(i)for(var s=0,h=e.length;s<h;s++){var u=e[s]*n,c=s<h-1?e[s+1]*n:t.length;o-=Math.abs(signedArea(t,u,c,n))}for(var l=0,s=0;s<r.length;s+=3){var f=r[s]*n,g=r[s+1]*n,p=r[s+2]*n;l+=Math.abs((t[f]-t[p])*(t[1+g]-t[1+f])-(t[f]-t[g])*(t[1+p]-t[1+f]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},earcut.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<e;o++)n.vertices.push(t[i][a][o]);0<i&&(r+=t[i-1].length,n.holes.push(r))}return n},earcut_1.default=default_1;var identity=function(t){return t},transform=function(t){if(null==t)return identity;var a,o,s=t.scale[0],h=t.scale[1],u=t.translate[0],c=t.translate[1];return function(t,e){e||(a=o=0);var n=2,r=t.length,i=new Array(r);for(i[0]=(a+=t[0])*s+u,i[1]=(o+=t[1])*h+c;n<r;)i[n]=t[n],++n;return i}},reverse=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},feature=function(e,t){return"GeometryCollection"===(t="string"==typeof t?e.objects[t]:t).type?{type:"FeatureCollection",features:t.geometries.map(function(t){return feature$1(e,t)})}:feature$1(e,t)};function feature$1(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,t=object(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:t}:null==r?{type:"Feature",id:n,properties:i,geometry:t}:{type:"Feature",id:n,bbox:r,properties:i,geometry:t}}function object(t,e){var u=transform(t.transform),c=t.arcs;function i(t){return u(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n){h=s=o=a=i=void 0;var i=t[n],a=e;a.length&&a.pop();for(var o=c[i<0?~i:i],s=0,h=o.length;s<h;++s)a.push(u(o[s],s));i<0&&reverse(a,h)}return e.length<2&&e.push(e[0]),e}function n(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function o(t){return t.map(n)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=i(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(i);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=o(e.arcs);break;case"MultiPolygon":n=e.arcs.map(o);break;default:return null}return{type:r,coordinates:n}}(e)}var stitch=function(o,r){var i={},s={},h={},a=[],u=-1;function t(t,e){for(var n in t){n=t[n];delete e[n.start],delete n.start,delete n.end,n.forEach(function(t){i[t<0?~t:t]=1}),a.push(n)}}return r.forEach(function(t,e){var n=o.arcs[t<0?~t:t];n.length<3&&!n[1][0]&&!n[1][1]&&(n=r[++u],r[u]=t,r[e]=n)}),r.forEach(function(t){var e,n,r,i=function(t){var e,n=o.arcs[t<0?~t:t],r=n[0];o.transform?(e=[0,0],n.forEach(function(t){e[0]+=t[0],e[1]+=t[1]})):e=n[n.length-1];return t<0?[e,r]:[r,e]}(t),a=i[0],i=i[1];(e=h[a])?(delete h[e.end],e.push(t),e.end=i,(n=s[i])?(delete s[n.start],r=n===e?e:e.concat(n),s[r.start=e.start]=h[r.end=n.end]=r):s[e.start]=h[e.end]=e):(e=s[i])?(delete s[e.start],e.unshift(t),e.start=a,(n=h[a])?(delete h[n.end],r=n===e?e:n.concat(e),s[r.start=n.start]=h[r.end=e.end]=r):s[e.start]=h[e.end]=e):s[(e=[t]).start=a]=h[e.end=i]=e}),t(h,s),t(s,h),r.forEach(function(t){i[t<0?~t:t]||a.push([t])}),a};function planarRingArea(t){for(var e,n=-1,r=t.length,i=t[r-1],a=0;++n<r;)e=i,i=t[n],a+=e[0]*i[1]-e[1]*i[0];return Math.abs(a)}function mergeArcs(s,t){var h={},n=[],r=[];function i(e){e.forEach(function(t){t.forEach(function(t){(h[t=t<0?~t:t]||(h[t]=[])).push(e)})}),n.push(e)}function u(t){return planarRingArea(object(s,{type:"Polygon",arcs:[t]}).coordinates[0])}return t.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":i(e.arcs);break;case"MultiPolygon":e.arcs.forEach(i)}}),n.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,r.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){h[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),n.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:r.map(function(t){var e,n=[];if(t.forEach(function(t){t.forEach(function(t){t.forEach(function(t){h[t<0?~t:t].length<2&&n.push(t)})})}),1<(e=(n=stitch(s,n)).length))for(var r,i,a=1,o=u(n[0]);a<e;++a)(r=u(n[a]))>o&&(i=n[0],n[0]=n[a],n[a]=i,o=r);return n}).filter(function(t){return 0<t.length})}}var bisect$1=function(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;t[i]<e?n=1+i:r=i}return n},neighbors=function(t){var r={},e=t.map(function(){return[]});function n(t,n){t.forEach(function(t){var e=r[t=t<0?~t:t];e?e.push(n):r[t]=[n]})}function i(t,e){t.forEach(function(t){n(t,e)})}var a,o={LineString:n,MultiLineString:i,Polygon:i,MultiPolygon:function(t,e){t.forEach(function(t){i(t,e)})}};for(a in t.forEach(function e(t,n){"GeometryCollection"===t.type?t.geometries.forEach(function(t){e(t,n)}):t.type in o&&o[t.type](t.arcs,n)}),r)for(var s=r[a],h=s.length,u=0;u<h;++u)for(var c=u+1;c<h;++c){var l,f=s[u],g=s[c];(l=e[f])[a=bisect$1(l,g)]!==g&&l.splice(a,0,g),(l=e[g])[a=bisect$1(l,f)]!==f&&l.splice(a,0,f)}return e},ascending=function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN},bisector=function(a){return 1===a.length&&(a=ascendingComparator(a)),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;a(t[i],e)<0?n=1+i:r=i}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;0<a(t[i],e)?r=i:n=1+i}return n}}};function ascendingComparator(n){return function(t,e){return ascending(n(t),e)}}var ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;function pair(t,e){return[t,e]}var number$1=function(t){return null===t?NaN:+t},extent=function(t,e){var n,r,i,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n<=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(n<r&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n<=n)for(r=i=n;++o<a;)null!=(n=e(t[o],o,t))&&(n<r&&(r=n),i<n&&(i=n));return[r,i]},identity$1=function(t){return t},range=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a},e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickIncrement(t,e,n){e=(e-t)/Math.max(0,n),t=Math.floor(Math.log(e)/Math.LN10),n=e/Math.pow(10,t);return 0<=t?(e10<=n?10:e5<=n?5:e2<=n?2:1)*Math.pow(10,t):-Math.pow(10,-t)/(e10<=n?10:e5<=n?5:e2<=n?2:1)}function tickStep(t,e,n){var n=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),n=n/r;return e10<=n?r*=10:e5<=n?r*=5:e2<=n&&(r*=2),e<t?-r:r}var sturges=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},quantile=function(t,e,n){if(null==n&&(n=number$1),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(1<=e)return+n(t[r-1],r-1,t);var r=(r-1)*e,e=Math.floor(r),i=+n(t[e],e,t);return i+(+n(t[e+1],e+1,t)-i)*(r-e)}},min=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n<=n)for(r=n;++a<i;)null!=(n=t[a])&&n<r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n<=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n<r&&(r=n);return r};function length$1(t){return t.length}function createTopology(t,i){var a={},o={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return t.forEach(function(t){var r=[];t.forEach(function(t,e){var n=t[0]<t[1]?t.join(","):t[1]+","+t[0],t=t.map(function(t){return i[t]});n in a?r.push(~a[n]):(r.push(a[n]=o.arcs.length),o.arcs.push(t))}),o.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(polygonArea(t.map(function(t){return i[t[0]]}))),arcs:[r]})}),o.objects.triangles.geometries.sort(function(t,e){return t.area-e.area}),o}function collapseTopology(t,e){for(var n,r,i,a,o=t.objects.triangles.geometries,s=bisector(function(t){return t.area}).left;o.length>e;)a=i=r=n=void 0,n=o[0],r=neighbors(o)[0][0],i=o[r],(a=mergeArcs(t,[n,i])).area=n.area+i.area,a.type="Polygon",a.arcs=a.arcs[0],o.splice(r,1),o.shift(),o.splice(s(o,a.area),0,a);if(e>o.length)throw new RangeError("Can't collapse topology into "+e+" pieces.");return feature(t,t.objects.triangles).features.map(function(t){return t.geometry.coordinates[0].pop(),t.geometry.coordinates[0]})}var triangulate=function(t,e){return collapseTopology(createTopology(cut(t),t),e)};function cut(t){for(var e=earcut_1(t.reduce(function(t,e){return t.concat([e[0]],[e[1]])},[])),n=[],r=0,i=e.length;r<i;r+=3)n.push([[e[r],e[r+1]],[e[r+1],e[r+2]],[e[r+2],e[r]]]);return n}var pieceOrder=function(t,n){if(8<t.length)return t.map(function(t,e){return e});var e=t.map(function(e){return n.map(function(t){return squaredDistance(e,t)})});return bestOrder(t,n,e)};function bestOrder(t,e,s){var h=1/0,u=t.map(function(t,e){return e});return function t(e,n,r){void 0===n&&(n=[]),void 0===r&&(r=0);for(var i=0;i<e.length;i++){var a=e.splice(i,1),o=s[a[0]][n.length];r+o<h&&(e.length?t(e.slice(),n.concat(a),r+o):(h=r+o,u=n.concat(a))),e.length&&e.splice(i,0,a[0])}}(u),u}function squaredDistance(t,e){t=distance(polygonCentroid$$1(t),polygonCentroid$$1(e));return t*t}function separate(t,e,n){var r,i=(n=void 0===n?{}:n).maxSegmentLength,a=(void 0===i&&(i=10),n.string),n=(void 0===a&&(a=!0),n.single),o=(void 0===n&&(n=!1),normalizeRing(t,i));return o.length<e.length+2&&addPoints(o,e.length+2-o.length),interpolateSets(triangulate(o,e.length),e.map(function(t){return normalizeRing(t,i)}),{match:!0,string:a,single:n,t0:"string"==typeof t&&t,t1:r=n&&!e.every(function(t){return"string"==typeof t})?r:e.slice(0)})}function combine$1(t,e,n){var r=(n=void 0===n?{}:n).maxSegmentLength,i=n.string,n=n.single,a=separate(e,t,{maxSegmentLength:r=void 0===r?10:r,string:i=void 0===i?!0:i,single:n=void 0===n?!1:n});return n?function(t){return a(1-t)}:a.map(function(e){return function(t){return e(1-t)}})}function interpolateAll(t,e,n){var r=(n=void 0===n?{}:n).maxSegmentLength,i=(void 0===r&&(r=10),n.string),n=(void 0===i&&(i=!0),n.single);if(void 0===n&&(n=!1),!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length||!t.length)throw new TypeError(INVALID_INPUT_ALL);function a(t){return normalizeRing(t,r)}var o,s,h=t.map(a),u=e.map(a);return n?(t.every(function(t){return"string"==typeof t})&&(o=t.slice(0)),e.every(function(t){return"string"==typeof t})&&(s=e.slice(0))):(o=t.slice(0),s=e.slice(0)),interpolateSets(h,u,{string:i,single:n,t0:o,t1:s,match:!1})}function interpolateSets(n,r,t){var e,i=(t=void 0===t?{}:t).string,a=t.single,o=t.t0,s=t.t1,t=t.match,h=t?pieceOrder(n,r):n.map(function(t,e){return e}),u=h.map(function(t,e){return interpolateRing(n[t],r[e],i)});return t&&Array.isArray(o)&&(o=h.map(function(t){return o[t]})),a&&i&&(Array.isArray(o)&&(o=o.join(" ")),Array.isArray(s)&&(s=s.join(" "))),a?(e=i?function(e){return u.map(function(t){return t(e)}).join(" ")}:function(e){return u.map(function(t){return t(e)})},i&&(o||s)?function(t){return t<1e-4&&o||1-t<1e-4&&s||e(t)}:e):i?(o=Array.isArray(o)?o.map(function(t){return"string"==typeof t&&t}):[],s=Array.isArray(s)?s.map(function(t){return"string"==typeof t&&t}):[],u.map(function(e,n){return o[n]||s[n]?function(t){return t<1e-4&&o[n]||1-t<1e-4&&s[n]||e(t)}:e})):u}function fromCircle(t,e,n,r,i){return fromShape(circlePoints(t,e,n),r,circlePath(t,e,n),2*Math.PI*n,i)}function toCircle(t,e,n,r,i){var a=fromCircle(e,n,r,t,i);return function(t){return a(1-t)}}function fromRect(t,e,n,r,i,a){return fromShape(rectPoints(t,e,n,r),i,rectPath(t,e,n,r),2*n+2*r,a)}function toRect(t,e,n,r,i,a){var o=fromRect(e,n,r,i,t,a);return function(t){return o(1-t)}}function fromShape(t,e,n,r,i){var a,o=(i=void 0===i?{}:i).maxSegmentLength,i=i.string,e=(void 0===i&&(i=!0),normalizeRing(e,o=void 0===o?10:o));return isFiniteNumber(r)&&e.length<r/o&&addPoints(e,Math.ceil(r/o-e.length)),r=t(e),a=interpolatePoints(r,e,i),i?function(t){return t<1e-4?n:a(t)}:a}function circlePoints(o,s,h){return function(n){var t=polygonCentroid$$1(n),r=polygonLength(n.concat([n[0]])),i=Math.atan2(n[0][1]-t[1],n[0][0]-t[0]),a=0;return n.map(function(t,e){return e&&(a+=distance(t,n[e-1])),t=i+2*Math.PI*(r?a/r:e/n.length),[Math.cos(t)*h+o,Math.sin(t)*h+s]})}}function rectPoints(o,s,h,u){return function(n){var t=polygonCentroid$$1(n),r=polygonLength(n.concat([n[0]])),t=Math.atan2(n[0][1]-t[1],n[0][0]-t[0]),i=0,a=(t=t<0?2*Math.PI+t:t)/(2*Math.PI);return n.map(function(t,e){e&&(i+=distance(t,n[e-1]));t=rectPoint((a+(r?i/r:e/n.length))%1);return[o+t[0]*h,s+t[1]*u]})}}function rectPoint(t){return t<=1/8?[1,.5+4*t]:t<=3/8?[1.5-4*t,1]:t<=5/8?[0,2.5-4*t]:t<=7/8?[4*t-2.5,0]:[1,4*t-3.5]}function circlePath(t,e,n){var r=t-n+","+e,i="A"+n+","+n+",0,1,1,";return"M"+r+i+(t+n+","+e)+i+r+"Z"}function rectPath(t,e,n,r){n=t+n,r=e+r;return"M"+t+","+e+"L"+n+","+e+"L"+n+","+r+"L"+t+","+r+"Z"}export{interpolate,separate,combine$1 as combine,interpolateAll,splitPathString,toPathString,fromCircle,toCircle,fromRect,toRect};
